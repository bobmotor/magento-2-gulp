/**
 * Absolute Web Services Intellectual Property
 *
 * @category     {development/deployment}
 * @copyright    Copyright Â© 1999-2018 Absolute Web Services, Inc. (http://www.absolutewebservices.com)
 * @author       Absolute Web Services
 * @license      http://www.absolutewebservices.com/license-agreement/  Single domain license
 * @terms of use http://www.absolutewebservices.com/terms-of-use/
 */

import gulp from 'gulp';
import livereload from 'gulp-livereload';
const browserSync = require('browser-sync').create();

import { liveArg, bsArg } from '../args';
import { sources } from '../paths';

module.exports = () => {
    for (let source in sources) {
        console.log(`${sources[source].watch}`);

        if (liveArg >= 0) {
            livereload.listen();
        } else if (bsArg >= 0) {
            browserSync.init({
                proxy: 'http://[hostname].loc/',
                host: '[hostname].loc',
                tunnel: '[hostname]',
                open: false
            });

            browserSync
                .watch(`${sources[source].css}*.css`)
                .on('change', browserSync.reload);
        }

        gulp.watch([`${sources[source].watch}`], ['less']);
    }
};
